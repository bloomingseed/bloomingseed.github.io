<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Umee test</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="/assets/css/umee_test.css">
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="bg-gray-100 flex justify-center md:my-6">
  <!-- <div id="app" class="min-w-320 max-w-3xl mx-auto p-6 bg-white rounded-md shadow-md"> -->
  <div id="app" class="w-full max-w-3xl mx-auto p-6 bg-white rounded-md shadow-md">
    <transition name="fade" mode="out-in">
      <div :key="step">
        <div v-if="step === 0">
          <h1 class="text-3xl font-semibold mb-6">PHIẾU KHẢO SÁT NGHE CHÍNH TẢ</h1>
          <h2 class="text-2xl font-semibold">Chào mừng bạn tham gia khảo sát!</h2>
          <div v-if="rowNumber !== -1" class="bg-yellow-100 text-yellow-700 border-l-4 border-yellow-500 p-4 mb-4 rounded" role="alert">
            <p class="font-bold">Notice</p>
            <p>You have previously submitted a response (Row #{{ rowNumber }}). You can still start a new submission if you want.</p>
          </div>
          <p class="mt-8 mb-4">Khảo sát này được thực hiện với mục đích nghiên cứu học thuật. Tất cả thông tin bạn cung cấp sẽ chỉ dùng cho nghiên cứu, không thu thập dữ liệu nhạy cảm, không tiết lộ danh tính và không sử dụng cho bất kỳ mục đích thương mại nào.</p>
          <p class="mb-4">Bạn có thể hoàn toàn yên tâm khi tham gia. Những chia sẻ của bạn sẽ góp phần quan trọng vào kết quả nghiên cứu.</p>
          <p class="mb-4">Rất mong nhận được sự hợp tác của bạn.
          Xin chân thành cảm ơn bạn đã dành thời gian tham gia khảo sát!</p>
          <p class="mt-8 mb-4">
            大家好！本问卷所有的数据仅用于学术研究，不会涉及到任何个人隐私，也不会用于任何商业用途。请您放心填写，衷心感谢您的支持与配合！感谢您参与本次问卷调查。
          </p>

          <div class="flex justify-center">
            <button v-if="rowNumber !== -1" @click="startNewSubmission" 
              class="bg-white text-blue-700 font-semibold py-4 px-6 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50 transition-colors duration-200"
            >Start New Submission</button>
            <button v-else @click="startNewSubmission" class="bg-white text-blue-700 font-semibold py-4 px-6 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50 transition-colors duration-200"
            >Start Survey</button>
          </div>
        </div>

        <div v-else-if="step === 1">
          <h2 class="text-2xl font-semibold">Chào mừng bạn đã bắt đầu bài khảo sát!</h2>
          <p class="mb-2 text-red-500">Mục có dấu * màu đỏ là thông tin bắt buộc.</p>
          <hr class="mb-6"/>

          <text-input-question
            label="Name:"
            placeholder="Điền câu trả lời ở đây"
            id="name"
            v-model="formData.name"
            :validation="v$.name"
            audio-src="/assets/mp3/choi 1.m4a"
            :audio-state="audioStates"
          ></text-input-question>

          <radio-button-question
            label="Hiện tại, bạn có gặp vấn đề sinh lý hoặc bệnh nào liên quan có ảnh hưởng đến thính giác khi nghe chọn đáp án không?"
            :options="radioOptions"
            v-model="formData.question2"
            :validation="v$.question2"
            @blur="v$.question2.$touch()"
            audio-src="/assets/mp3/va 1.m4a"
            :audio-state="audioStates"
          ></radio-button-question>

          <!-- image question -->
          <image-radio-question
            label="Choose your favorite shoe:"
            :options="shoeOptions"
            v-model="formData.favoriteShoe"
            :validation="v$.favoriteShoe"
            @blur="v$.favoriteShoe.$touch()"
            audio-src="/assets/mp3/dia 1.m4a"
            :audio-state="audioStates"
          ></image-radio-question>

          <rating-question
            v-model="formData.myRating"
            label="How would you rate our service?"
            :validation="v$.myRating"
            :min="1"
            :max="10"
            icon="heart"
            size="32"
          ></rating-question>
          <hr>
          <div class="flex justify-center mt-6">
            <button @click="validateNextStep" class="bg-white text-blue-700 font-semibold py-4 px-6 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50 transition-colors duration-200">Next</button>
          </div>
        </div>

        <div v-else-if="step === 2">
          <h2 class="text-2xl font-semibold mb-4">Survey Questions</h2>
          
          
          <div class="flex justify-center mt-4">
            <button @click="prevStep" class="bg-white text-gray-700 font-semibold py-4 px-6 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-opacity-50 transition-colors duration-200 mr-2">Previous</button>
            <button @click="submitForm" class="bg-white text-green-700 font-semibold py-4 px-6 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-opacity-50 transition-colors duration-200">Submit</button>
          </div>
        </div>

        <div v-else-if="step === 3">
          <h2 class="text-2xl font-semibold mb-4">Thank You!</h2>
          <p>Your response has been collected. Thank you for participating in the survey!</p>
          <p>Submitted row #{{rowNumber}}</p>
        </div>
      </div>
    </transition>
    <!-- Waiting Modal -->
    <transition name="modal-fade">
      <div v-if="isSubmitting" class="modal-backdrop">
        <div class="modal-box">
          <div class="spinner"></div>
          <p class="modal-text">Submitting your answers…</p>
        </div>
      </div>
    </transition>

  </div>





<script src="/assets/js/umee_test.js"></script>    
<script src="https://cdn.jsdelivr.net/npm/vue-demi"></script>
<script src="https://cdn.jsdelivr.net/npm/@vuelidate/core"></script>
<script src="https://cdn.jsdelivr.net/npm/@vuelidate/validators"></script>
<script src="/assets/js/listening_question.js"></script>
<script src="/assets/js/image_question.js"></script>
<script src="/assets/js/image_radio_question.js"></script>
<script src="/assets/js/text_input_question.js"></script>
<script src="/assets/js/radio_button_question.js"></script>
<!-- <script src="/assets/js/rating_question.js"></script> -->
</body>
</html>